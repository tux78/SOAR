Fri Dec 27 23:56:46 CET 2019 Running command \'mkdir dev_intelmq\'
Start command output
mkdir: cannot create directory â€˜dev_intelmqâ€™: File exists
End command output
Fri Dec 27 23:56:46 CET 2019 Running command \'git clone https://github.com/tux78/intelmq.git ./dev_intelmq\'
Start command output
fatal: destination path './dev_intelmq' already exists and is not an empty directory.
End command output
Fri Dec 27 23:56:46 CET 2019 Running command \'    docker build       -t intelmq:PROD       -f ./intelmq/Dockerfile.intelmq .  \'
Start command output
Sending build context to Docker daemon  413.4MB
Step 1/9 : FROM python:3.8 AS intelmqbase
 ---> b162b5322f1c
Step 2/9 : RUN echo "Installing necessary OS packages..."   && apt update   && apt install -y less nano openssl redis-server nginx php-fpm sudo   && echo "Finished."
 ---> Using cache
 ---> e358e3043d5a
Step 3/9 : RUN echo "Installing pip requirement and dxlclient..."   && pip install --upgrade pip setuptools wheel   && pip install intelmq   && pip install dxlclient   && pip install dxltieclient   && pip install pymisp   && echo "Finished."
 ---> Using cache
 ---> 4da70d1b4222
Step 4/9 : RUN echo "Finalizing intelMQ setup..."   && useradd -d /opt/intelmq -U -s /bin/bash intelmq   && intelmqsetup   && echo "Finished."
 ---> Using cache
 ---> 6b0c9aae0a45
Step 5/9 : COPY ./intelmq/etc/ /etc/
 ---> Using cache
 ---> 2d50d500a7bc
Step 6/9 : COPY ./intelmq/var/ /var/
 ---> Using cache
 ---> fb1f10b35311
Step 7/9 : RUN echo "Finalizing intelMQ Manager setup..."   && mkdir /opt/intelmq/etc/manager   && touch /opt/intelmq/etc/manager/positions.conf   && chown www-data:www-data /opt/intelmq/etc/manager/positions.conf   && echo "Finished."
 ---> Using cache
 ---> fb83c71d105c
Step 8/9 : RUN echo "Setting permissions..."   && echo "www-data ALL=(intelmq) NOPASSWD: /usr/local/bin/intelmqctl" >> /etc/sudoers   && chown intelmq:intelmq /etc/intelmq/openDXL -R   && chown www-data:www-data /opt/intelmq/etc -R   && echo "Finished."
 ---> Using cache
 ---> 418108967bef
Step 9/9 : CMD ["/bin/sh", "-c", "service nginx restart && service php7.3-fpm start && service redis-server restart && tail -f /dev/null"]
 ---> Using cache
 ---> 4c5e6e3e9e2c
Successfully built 4c5e6e3e9e2c
Successfully tagged intelmq:PROD
End command output
Fri Dec 27 23:56:51 CET 2019 Running command \'    docker-compose up --no-start --force-recreate intelmq  \'
Start command output
Recreating soar_intelmq_1 ... 
[1A[2KRecreating soar_intelmq_1 ... [32mdone[0m[1BEnd command output
Fri Dec 27 23:57:02 CET 2019 Running command \'    docker-compose start intelmq  \'
Start command output
Starting intelmq ... 
[1A[2KStarting intelmq ... [32mdone[0m[1BEnd command output
Fri Dec 27 23:57:04 CET 2019 Running command \'      docker-compose exec intelmq        /usr/local/bin/dxlclient        provisionconfig /etc/intelmq/openDXL 10.10.10.204 10.10.10.211 -t 8443 -u admin -p mcafee    \'
Start command output
INFO: Saving csr file to /etc/intelmq/openDXL/client.csr
INFO: Saving private key file to /etc/intelmq/openDXL/client.key
INFO: Saving DXL config file to /etc/intelmq/openDXL/dxlclient.config
INFO: Saving ca bundle file to /etc/intelmq/openDXL/ca-bundle.crt
INFO: Saving client certificate file to /etc/intelmq/openDXL/client.crt
End command output
